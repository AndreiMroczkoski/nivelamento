{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Andrei Mroczkoski\\\\Downloads\\\\nivelamento-main\\\\nivelamento-main\\\\src\\\\pages\\\\MovimentarProduto\\\\index.js\",\n  _s = $RefreshSig$();\n/* \nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\n\nexport default function MovimentarProduto() {\n    const [quantidade, setQuantidade] = useState(\"\");\n    const [tipo, setTipo] = useState(\"entrada\");\n    const [produto, setProduto] = useState(\"\");\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n    const buscarProduto = async () => {\n        try {\n            const response = await axios.get(`http://localhost:3001/produtos/${id}`);\n            setProduto(response.data);\n        } catch (error) {\n            console.error(\"Erro ao buscar produto:\", error);\n        }\n    };\n\n    buscarProduto();\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if (!produto || !quantidade) {\n            alert(\"Preencha todos os campos\");\n            return;\n        }\n\n        const movimento = {\n            produto: produto.name,\n            quantidade: parseInt(quantidade),\n            tipo,\n            data: new Date().toLocaleString(),\n        };\n\n        try {\n            await axios.post(\"http://localhost:3001/movimentacoes\", movimento);\n            alert(\"Movimentação registrada com sucesso!\");\n            setQuantidade(\"\");\n            setTipo(\"entrada\");\n        } catch (error) {\n            console.error(\"Erro ao registrar movimentação:\", error);\n        }\n    };\n\n    return (\n        <div className=\"move-product-page\">\n            <h2>Movimentar Produto</h2>\n            <form onSubmit={handleSubmit}>\n                <label>Produto: {produto.nome}</label>\n\n                <label>Quantidade:</label>\n                <input\n                    type=\"number\"\n                    value={quantidade}\n                    onChange={(e) => setQuantidade(e.target.value)}\n                />\n\n                <label>Tipo:</label>\n                <select value={tipo} onChange={(e) => setTipo(e.target.value)}>\n                    <option value=\"entrada\">Entrada</option>\n                    <option value=\"saida\">Saída</option>\n                </select>\n\n                <button type=\"submit\">Registrar Movimentação</button>\n            </form>\n        </div>\n    );\n}\n */\n\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MovimentarProduto() {\n  _s();\n  const [quantidade, setQuantidade] = useState(\"\");\n  const [tipo, setTipo] = useState(\"entrada\");\n  const [produto, setProduto] = useState(ll);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const buscarProduto = async () => {\n      try {\n        const response = await axios.get(`http://localhost:3001/produtos/${id}`);\n        setProduto(response.data);\n      } catch (error) {\n        console.error(\"Erro ao buscar produto:\", error);\n      }\n    };\n    buscarProduto();\n  }, [id]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!produto || !quantidade) {\n      alert(\"Preencha todos os campos\");\n      return;\n    }\n    const quantidadeMovimentada = parseInt(quantidade);\n\n    // Calcula o novo estoque\n    let novoEstoque = produto.estoque;\n    if (tipo === \"entrada\") {\n      novoEstoque += quantidadeMovimentada;\n    } else if (tipo === \"saida\") {\n      if (produto.estoque < quantidadeMovimentada) {\n        alert(\"Quantidade insuficiente no estoque!\");\n        return;\n      }\n      novoEstoque -= quantidadeMovimentada;\n    }\n    const movimento = {\n      produto: produto.nome,\n      quantidade: quantidadeMovimentada,\n      tipo,\n      data: new Date().toLocaleString()\n    };\n    try {\n      // Registra a movimentação\n      await axios.post(\"http://localhost:3001/movimentacoes\", movimento);\n\n      // Atualiza o estoque no banco de dados\n      await axios.put(`http://localhost:3001/produtos/${id}`, {\n        ...produto,\n        estoque: novoEstoque\n      });\n      alert(\"Movimentação registrada com sucesso!\");\n      setQuantidade(\"\");\n      setTipo(\"entrada\");\n\n      // Atualiza o estado do produto para refletir o novo estoque\n      setProduto(prevProduto => ({\n        ...prevProduto,\n        estoque: novoEstoque\n      }));\n    } catch (error) {\n      console.error(\"Erro ao registrar movimentação:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"move-product-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Movimentar Produto\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }, this), produto ? /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Produto: \", produto.nome]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Estoque Atual: \", produto.estoque]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Quantidade:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        value: quantidade,\n        onChange: e => setQuantidade(e.target.value),\n        min: \"1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Tipo:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: tipo,\n        onChange: e => setTipo(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"entrada\",\n          children: \"Entrada\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"saida\",\n          children: \"Sa\\xEDda\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Registrar Movimenta\\xE7\\xE3o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Carregando produto...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 9\n  }, this);\n}\n_s(MovimentarProduto, \"nMtRPjHZaLrp6YrEkwwgyG8gaUU=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = MovimentarProduto;\nvar _c;\n$RefreshReg$(_c, \"MovimentarProduto\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","axios","jsxDEV","_jsxDEV","MovimentarProduto","_s","quantidade","setQuantidade","tipo","setTipo","produto","setProduto","ll","id","navigate","buscarProduto","response","get","data","error","console","handleSubmit","e","preventDefault","alert","quantidadeMovimentada","parseInt","novoEstoque","estoque","movimento","nome","Date","toLocaleString","post","put","prevProduto","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","min","_c","$RefreshReg$"],"sources":["C:/Users/Andrei Mroczkoski/Downloads/nivelamento-main/nivelamento-main/src/pages/MovimentarProduto/index.js"],"sourcesContent":["/* \nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\n\nexport default function MovimentarProduto() {\n    const [quantidade, setQuantidade] = useState(\"\");\n    const [tipo, setTipo] = useState(\"entrada\");\n    const [produto, setProduto] = useState(\"\");\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n    const buscarProduto = async () => {\n        try {\n            const response = await axios.get(`http://localhost:3001/produtos/${id}`);\n            setProduto(response.data);\n        } catch (error) {\n            console.error(\"Erro ao buscar produto:\", error);\n        }\n    };\n\n    buscarProduto();\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if (!produto || !quantidade) {\n            alert(\"Preencha todos os campos\");\n            return;\n        }\n\n        const movimento = {\n            produto: produto.name,\n            quantidade: parseInt(quantidade),\n            tipo,\n            data: new Date().toLocaleString(),\n        };\n\n        try {\n            await axios.post(\"http://localhost:3001/movimentacoes\", movimento);\n            alert(\"Movimentação registrada com sucesso!\");\n            setQuantidade(\"\");\n            setTipo(\"entrada\");\n        } catch (error) {\n            console.error(\"Erro ao registrar movimentação:\", error);\n        }\n    };\n\n    return (\n        <div className=\"move-product-page\">\n            <h2>Movimentar Produto</h2>\n            <form onSubmit={handleSubmit}>\n                <label>Produto: {produto.nome}</label>\n\n                <label>Quantidade:</label>\n                <input\n                    type=\"number\"\n                    value={quantidade}\n                    onChange={(e) => setQuantidade(e.target.value)}\n                />\n\n                <label>Tipo:</label>\n                <select value={tipo} onChange={(e) => setTipo(e.target.value)}>\n                    <option value=\"entrada\">Entrada</option>\n                    <option value=\"saida\">Saída</option>\n                </select>\n\n                <button type=\"submit\">Registrar Movimentação</button>\n            </form>\n        </div>\n    );\n}\n */\n\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\n\nexport default function MovimentarProduto() {\n    const [quantidade, setQuantidade] = useState(\"\");\n    const [tipo, setTipo] = useState(\"entrada\");\n    const [produto, setProduto] = useState(ll);\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const buscarProduto = async () => {\n            try {\n                const response = await axios.get(`http://localhost:3001/produtos/${id}`);\n                setProduto(response.data);\n            } catch (error) {\n                console.error(\"Erro ao buscar produto:\", error);\n            }\n        };\n\n        buscarProduto();\n    }, [id]);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if (!produto || !quantidade) {\n            alert(\"Preencha todos os campos\");\n            return;\n        }\n\n        const quantidadeMovimentada = parseInt(quantidade);\n\n        // Calcula o novo estoque\n        let novoEstoque = produto.estoque;\n        if (tipo === \"entrada\") {\n            novoEstoque += quantidadeMovimentada;\n        } else if (tipo === \"saida\") {\n            if (produto.estoque < quantidadeMovimentada) {\n                alert(\"Quantidade insuficiente no estoque!\");\n                return;\n            }\n            novoEstoque -= quantidadeMovimentada;\n        }\n\n        const movimento = {\n            produto: produto.nome,\n            quantidade: quantidadeMovimentada,\n            tipo,\n            data: new Date().toLocaleString(),\n        };\n\n        try {\n            // Registra a movimentação\n            await axios.post(\"http://localhost:3001/movimentacoes\", movimento);\n\n            // Atualiza o estoque no banco de dados\n            await axios.put(`http://localhost:3001/produtos/${id}`, {\n                ...produto,\n                estoque: novoEstoque,\n            });\n\n            alert(\"Movimentação registrada com sucesso!\");\n            setQuantidade(\"\");\n            setTipo(\"entrada\");\n\n            // Atualiza o estado do produto para refletir o novo estoque\n            setProduto((prevProduto) => ({\n                ...prevProduto,\n                estoque: novoEstoque,\n            }));\n\n        } catch (error) {\n            console.error(\"Erro ao registrar movimentação:\", error);\n        }\n    };\n\n    return (\n        <div className=\"move-product-page\">\n            <h2>Movimentar Produto</h2>\n            {produto ? (\n                <form onSubmit={handleSubmit}>\n                    <label>Produto: {produto.nome}</label>\n                    <label>Estoque Atual: {produto.estoque}</label>\n\n                    <label>Quantidade:</label>\n                    <input\n                        type=\"number\"\n                        value={quantidade}\n                        onChange={(e) => setQuantidade(e.target.value)}\n                        min=\"1\"\n                    />\n\n                    <label>Tipo:</label>\n                    <select value={tipo} onChange={(e) => setTipo(e.target.value)}>\n                        <option value=\"entrada\">Entrada</option>\n                        <option value=\"saida\">Saída</option>\n                    </select>\n\n                    <button type=\"submit\">Registrar Movimentação</button>\n                </form>\n            ) : (\n                <p>Carregando produto...</p>\n            )}\n        </div>\n    );\n}\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,SAAS,QAAQ,kBAAkB;AACzD,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,eAAe,SAASC,iBAAiBA,CAAA,EAAG;EAAAC,EAAA;EACxC,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACU,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,SAAS,CAAC;EAC3C,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAACc,EAAE,CAAC;EAC1C,MAAM;IAAEC;EAAG,CAAC,GAAGb,SAAS,CAAC,CAAC;EAC1B,MAAMc,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACZ,MAAMkB,aAAa,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMf,KAAK,CAACgB,GAAG,CAAC,kCAAkCJ,EAAE,EAAE,CAAC;QACxEF,UAAU,CAACK,QAAQ,CAACE,IAAI,CAAC;MAC7B,CAAC,CAAC,OAAOC,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MACnD;IACJ,CAAC;IAEDJ,aAAa,CAAC,CAAC;EACnB,CAAC,EAAE,CAACF,EAAE,CAAC,CAAC;EAER,MAAMQ,YAAY,GAAG,MAAOC,CAAC,IAAK;IAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAACb,OAAO,IAAI,CAACJ,UAAU,EAAE;MACzBkB,KAAK,CAAC,0BAA0B,CAAC;MACjC;IACJ;IAEA,MAAMC,qBAAqB,GAAGC,QAAQ,CAACpB,UAAU,CAAC;;IAElD;IACA,IAAIqB,WAAW,GAAGjB,OAAO,CAACkB,OAAO;IACjC,IAAIpB,IAAI,KAAK,SAAS,EAAE;MACpBmB,WAAW,IAAIF,qBAAqB;IACxC,CAAC,MAAM,IAAIjB,IAAI,KAAK,OAAO,EAAE;MACzB,IAAIE,OAAO,CAACkB,OAAO,GAAGH,qBAAqB,EAAE;QACzCD,KAAK,CAAC,qCAAqC,CAAC;QAC5C;MACJ;MACAG,WAAW,IAAIF,qBAAqB;IACxC;IAEA,MAAMI,SAAS,GAAG;MACdnB,OAAO,EAAEA,OAAO,CAACoB,IAAI;MACrBxB,UAAU,EAAEmB,qBAAqB;MACjCjB,IAAI;MACJU,IAAI,EAAE,IAAIa,IAAI,CAAC,CAAC,CAACC,cAAc,CAAC;IACpC,CAAC;IAED,IAAI;MACA;MACA,MAAM/B,KAAK,CAACgC,IAAI,CAAC,qCAAqC,EAAEJ,SAAS,CAAC;;MAElE;MACA,MAAM5B,KAAK,CAACiC,GAAG,CAAC,kCAAkCrB,EAAE,EAAE,EAAE;QACpD,GAAGH,OAAO;QACVkB,OAAO,EAAED;MACb,CAAC,CAAC;MAEFH,KAAK,CAAC,sCAAsC,CAAC;MAC7CjB,aAAa,CAAC,EAAE,CAAC;MACjBE,OAAO,CAAC,SAAS,CAAC;;MAElB;MACAE,UAAU,CAAEwB,WAAW,KAAM;QACzB,GAAGA,WAAW;QACdP,OAAO,EAAED;MACb,CAAC,CAAC,CAAC;IAEP,CAAC,CAAC,OAAOR,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IAC3D;EACJ,CAAC;EAED,oBACIhB,OAAA;IAAKiC,SAAS,EAAC,mBAAmB;IAAAC,QAAA,gBAC9BlC,OAAA;MAAAkC,QAAA,EAAI;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAC1B/B,OAAO,gBACJP,OAAA;MAAMuC,QAAQ,EAAErB,YAAa;MAAAgB,QAAA,gBACzBlC,OAAA;QAAAkC,QAAA,GAAO,WAAS,EAAC3B,OAAO,CAACoB,IAAI;MAAA;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACtCtC,OAAA;QAAAkC,QAAA,GAAO,iBAAe,EAAC3B,OAAO,CAACkB,OAAO;MAAA;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAE/CtC,OAAA;QAAAkC,QAAA,EAAO;MAAW;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC1BtC,OAAA;QACIwC,IAAI,EAAC,QAAQ;QACbC,KAAK,EAAEtC,UAAW;QAClBuC,QAAQ,EAAGvB,CAAC,IAAKf,aAAa,CAACe,CAAC,CAACwB,MAAM,CAACF,KAAK,CAAE;QAC/CG,GAAG,EAAC;MAAG;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CAAC,eAEFtC,OAAA;QAAAkC,QAAA,EAAO;MAAK;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACpBtC,OAAA;QAAQyC,KAAK,EAAEpC,IAAK;QAACqC,QAAQ,EAAGvB,CAAC,IAAKb,OAAO,CAACa,CAAC,CAACwB,MAAM,CAACF,KAAK,CAAE;QAAAP,QAAA,gBAC1DlC,OAAA;UAAQyC,KAAK,EAAC,SAAS;UAAAP,QAAA,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACxCtC,OAAA;UAAQyC,KAAK,EAAC,OAAO;UAAAP,QAAA,EAAC;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChC,CAAC,eAETtC,OAAA;QAAQwC,IAAI,EAAC,QAAQ;QAAAN,QAAA,EAAC;MAAsB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnD,CAAC,gBAEPtC,OAAA;MAAAkC,QAAA,EAAG;IAAqB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAC9B;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd;AAACpC,EAAA,CAtGuBD,iBAAiB;EAAA,QAItBJ,SAAS,EACPD,WAAW;AAAA;AAAAiD,EAAA,GALR5C,iBAAiB;AAAA,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}